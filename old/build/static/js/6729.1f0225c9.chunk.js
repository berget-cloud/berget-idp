"use strict";(self.webpackChunkberget_idp=self.webpackChunkberget_idp||[]).push([[6729],{6729:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var a=r(5043),n=r(2591),s=r(579),i=(r(4837),r(2719)),o=r(6428);r(8888);function l(e){return e instanceof Object?"function"===typeof e?e:e instanceof Array?e.map(l):Object.fromEntries(Object.entries(e).map((e=>{let[t,r]=e;return[t,l(r)]}))):e}const u=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,d=(e,t)=>{if(!e)return"";const r=t.match(/{\d+}/g);if(!r)return"";const a=r.reduce(((e,t)=>e+parseInt(t.replace("{","").replace("}",""))),0);let n=e.replace(/\D+/g,"");if(parseInt(n)!=n)return"";n.length>a&&(n=n.substring(0,a));const s=r.reduce(((e,t)=>e+`(\\d${t})`),"^");let i=new RegExp(s).exec(n);if(!i)return e;let o=t;for(let l=0;l<r.length;l++)o=o.replace(r[l],i[l+1]);return o};var c=r(569),p=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};function m(e){var t,r;const{kcContext:n,i18n:m,doMakeUserConfirmPassword:f}=e,{insertScriptTags:g}=(0,c.p)({componentOrHookName:"useUserProfileForm",scriptTags:Object.keys(null!==(r=null===(t=n.profile)||void 0===t?void 0:t.html5DataAnnotations)&&void 0!==r?r:{}).filter((e=>"kcMultivalued"!==e&&"kcNumberFormat"!==e)).map((e=>({type:"module",src:`${n.url.resourcesPath}/js/${e}.js`})))});(0,a.useEffect)((()=>{g()}),[]);const{getErrors:h}=function(e){const{kcContext:t,i18n:r}=e,{messagesPerField:n,passwordPolicies:l}=t,{msg:c,msgStr:p,advancedMsg:m,advancedMsgStr:f}=r,g=function(e){const t=(0,a.useRef)(null);return t.current=e,(0,a.useState)((()=>function(){return t.current(...arguments)}))[0]}((e=>{var t,r;const{attributeName:h,formFieldStates:b}=e,y=b.find((e=>{let{attribute:t}=e;return t.name===h}));(0,i.assert)(void 0!==y);const{attribute:x}=y,k=(()=>{var e;let{valueOrValues:t}=y;{const{kcNumberUnFormat:r}=null!==(e=x.html5DataAnnotations)&&void 0!==e?e:{};r&&(t=t instanceof Array?t.map((e=>d(e,r))):d(t,r))}return t})();(0,i.assert)(void 0!==x);e:{if(x.multivalued){const e=(null===(t=x.values)||void 0===t?void 0:t.length)?x.values:[""];(0,i.assert)(k instanceof Array);const r=k;if(JSON.stringify(e)!==JSON.stringify(r.slice(0,e.length)))break e}else{const e=null!==(r=x.value)&&void 0!==r?r:"";(0,i.assert)("string"===typeof k);if(e!==k)break e}let e;try{e=n.existsError(h)}catch(I){break e}if(!e)break e;const a=n.get(h);return[{errorMessageStr:a,errorMessage:(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:a}},0),fieldIndex:void 0,source:{type:"server"}}]}e:{if(!x.multivalued)break e;if(v({attribute:x}))break e;(0,i.assert)(k instanceof Array);const e=k,t=e.map((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let[,a]=t;const n=g({attributeName:h,formFieldStates:b.map((e=>e.attribute.name===h?((0,i.assert)(e.valueOrValues instanceof Array),{attribute:Object.assign(Object.assign({},x),{annotations:Object.assign(Object.assign({},x.annotations),{inputType:void 0}),multivalued:!1}),valueOrValues:e.valueOrValues[a]}):e))});return n.filter((e=>"other"!==e.source.type||"requiredField"!==e.source.rule)).map((e=>Object.assign(Object.assign({},e),{fieldIndex:a})))})).reduce(((e,t)=>[...e,...t]),[]);t:{if(!x.required)break t;if(e.every((e=>""!==e)))break t;const r=["error-user-attribute-required"];t.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...r)},`${h}-${t.length}`),errorMessageStr:p(...r),fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}return t}e:{if(!x.multivalued)break e;if(!v({attribute:x}))break e;const e="multivalued",t=x.validators[e];if(void 0===t)return[];const{min:r}=t,n=r?parseInt(`${r}`):x.required?1:0;(0,i.assert)(!isNaN(n));const{max:o}=t,l=o?parseInt(`${o}`):1/0;(0,i.assert)(!isNaN(l)),(0,i.assert)(k instanceof Array);const u=k;if(n<=u.length&&u.length<=l)return[];const d=["error-invalid-multivalued-size",`${n}`,`${l}`];return[{errorMessage:(0,s.jsx)(a.Fragment,{children:c(...d)},0),errorMessageStr:p(...d),fieldIndex:void 0,source:{type:"validator",name:e}}]}(0,i.assert)("string"===typeof k);const O=k,j=[];if("password"===h&&void 0!==l){e:{const e="length",t=l[e];if(!t)break e;const r=t;if(O.length>=r)break e;const n=["invalidPasswordMinLengthMessage",`${r}`];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...n)},`${h}-${j.length}`),errorMessageStr:p(...n),fieldIndex:void 0,source:{type:"passwordPolicy",name:e}})}e:{const e="digits",t=l[e];if(!t)break e;const r=t;if(O.split("").filter((e=>!isNaN(parseInt(e)))).length>=r)break e;const n=["invalidPasswordMinDigitsMessage",`${r}`];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...n)},`${h}-${j.length}`),errorMessageStr:p(...n),fieldIndex:void 0,source:{type:"passwordPolicy",name:e}})}e:{const e="lowerCase",t=l[e];if(!t)break e;const r=t;if(O.split("").filter((e=>e===e.toLowerCase()&&e!==e.toUpperCase())).length>=r)break e;const n=["invalidPasswordMinLowerCaseCharsMessage",`${r}`];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...n)},`${h}-${j.length}`),errorMessageStr:p(...n),fieldIndex:void 0,source:{type:"passwordPolicy",name:e}})}e:{const e="upperCase",t=l[e];if(!t)break e;const r=t;if(O.split("").filter((e=>e===e.toUpperCase()&&e!==e.toLowerCase())).length>=r)break e;const n=["invalidPasswordMinUpperCaseCharsMessage",`${r}`];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...n)},`${h}-${j.length}`),errorMessageStr:p(...n),fieldIndex:void 0,source:{type:"passwordPolicy",name:e}})}e:{const e="specialChars",t=l[e];if(!t)break e;const r=t;if(O.split("").filter((e=>!e.match(/[a-zA-Z0-9]/))).length>=r)break e;const n=["invalidPasswordMinSpecialCharsMessage",`${r}`];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...n)},`${h}-${j.length}`),errorMessageStr:p(...n),fieldIndex:void 0,source:{type:"passwordPolicy",name:e}})}e:{const e="notUsername";if(!l[e])break e;const t=b.find((e=>"username"===e.attribute.name));if(!t)break e;const r=(()=>{var e;let{valueOrValues:r}=t;(0,i.assert)("string"===typeof r);{const{kcNumberUnFormat:t}=null!==(e=x.html5DataAnnotations)&&void 0!==e?e:{};t&&(r=d(r,t))}return r})();if(""===r)break e;if(O!==r)break e;const n=["invalidPasswordNotUsernameMessage"];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...n)},`${h}-${j.length}`),errorMessageStr:p(...n),fieldIndex:void 0,source:{type:"passwordPolicy",name:e}})}e:{const e="notEmail";if(!l[e])break e;const t=b.find((e=>"email"===e.attribute.name));if(!t)break e;(0,i.assert)("string"===typeof t.valueOrValues);{const e=t.valueOrValues;if(""===e)break e;if(O!==e)break e}const r=["invalidPasswordNotEmailMessage"];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...r)},`${h}-${j.length}`),errorMessageStr:p(...r),fieldIndex:void 0,source:{type:"passwordPolicy",name:e}})}}e:{if("password-confirm"!==h)break e;const e=b.find((e=>"password"===e.attribute.name));(0,i.assert)(void 0!==e),(0,i.assert)("string"===typeof e.valueOrValues);if(O===e.valueOrValues)break e;const t=["invalidPasswordConfirmMessage"];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...t)},`${h}-${j.length}`),errorMessageStr:p(...t),fieldIndex:void 0,source:{type:"other",rule:"passwordConfirmMatchesPassword"}})}const{validators:$}=x;e:{if(!x.required)break e;if(""!==O)break e;const e=["error-user-attribute-required"];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...e)},`${h}-${j.length}`),errorMessageStr:p(...e),fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}e:{const e="length",t=$[e];if(!t)break e;const{"ignore.empty.value":r=!1,max:n,min:i}=t;if(r&&""===O)break e;const o={type:"validator",name:e};if(n&&O.length>parseInt(`${n}`)){const e=["error-invalid-length-too-long",`${n}`];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...e)},`${h}-${j.length}`),errorMessageStr:p(...e),fieldIndex:void 0,source:o})}if(i&&O.length<parseInt(`${i}`)){const e=["error-invalid-length-too-short",`${i}`];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...e)},`${h}-${j.length}`),errorMessageStr:p(...e),fieldIndex:void 0,source:o})}}e:{const e="pattern",t=$[e];if(void 0===t)break e;const{"ignore.empty.value":r=!1,pattern:n,"error-message":i}=t;if(r&&""===O)break e;if(new RegExp(n).test(O))break e;const l=[null!==i&&void 0!==i?i:(0,o.id)("shouldMatchPattern"),n];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:m(...l)},`${h}-${j.length}`),errorMessageStr:f(...l),fieldIndex:void 0,source:{type:"validator",name:e}})}e:{{const e=j[j.length-1];if(void 0!==e&&"validator"===e.source.type&&"pattern"===e.source.name)break e}const e="email",t=$[e];if(void 0===t)break e;const{"ignore.empty.value":r=!1}=t;if(r&&""===O)break e;if(u.test(O))break e;const n=[(0,o.id)("invalidEmailMessage")];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...n)},`${h}-${j.length}`),errorMessageStr:p(...n),fieldIndex:void 0,source:{type:"validator",name:e}})}e:{const e="integer",t=$[e];if(void 0===t)break e;const{"ignore.empty.value":r=!1,max:n,min:i}=t;if(r&&""===O)break e;const o=parseInt(O),l={type:"validator",name:e};if(isNaN(o)){const e=["mustBeAnInteger"];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...e)},`${h}-${j.length}`),errorMessageStr:p(...e),fieldIndex:void 0,source:l})}else if(n&&o>parseInt(`${n}`)){const e=["error-number-out-of-range-too-big",`${n}`];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...e)},`${h}-${j.length}`),errorMessageStr:p(...e),fieldIndex:void 0,source:l})}else if(i&&o<parseInt(`${i}`)){const e=["error-number-out-of-range-too-small",`${i}`];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...e)},`${h}-${j.length}`),errorMessageStr:p(...e),fieldIndex:void 0,source:l})}else;}e:{const e="options",t=$[e];if(void 0===t)break e;if(""===O)break e;if(t.options.indexOf(O)>=0)break e;const r=[(0,o.id)("notAValidOption")];j.push({errorMessage:(0,s.jsx)(a.Fragment,{children:c(...r)},`${h}-${j.length}`),errorMessageStr:p(...r),fieldIndex:void 0,source:{type:"validator",name:e}})}return j}));return{getErrors:g}}({kcContext:n,i18n:m}),b=(0,a.useMemo)((()=>{var e,t;const r=(()=>{var e;if(!("profile"in n)||!("attributesByName"in n.profile)||0===Object.keys(n.profile.attributesByName).length){if("register"in n&&n.register instanceof Object&&"formData"in n.register)return["firstName","lastName","email","username"].filter((e=>"username"!==e||!n.realm.registrationEmailAsUsername)).map((e=>{var t;return(0,o.id)({name:e,displayName:(0,o.id)(`\${${e}}`),required:!0,value:null!==(t=n.register.formData[e])&&void 0!==t?t:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(e){case"email":return"email";case"username":return"username";default:return}})()})}));if("user"in n&&n.user instanceof Object)return["username","email","firstName","lastName"].filter((e=>"username"!==e||n.user.editUsernameAllowed)).map((e=>{var t;return(0,o.id)({name:e,displayName:(0,o.id)(`\${${e}}`),required:!0,value:null!==(t=n.user[e])&&void 0!==t?t:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(e){case"email":return"email";case"username":return"username";default:return}})()})}));if("email"in n&&n.email instanceof Object)return[(0,o.id)({name:"email",displayName:(0,o.id)("${email}"),required:!0,value:null!==(e=n.email.value)&&void 0!==e?e:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:"email"})];(0,i.assert)(!1,"Unable to mock user profile from the current kcContext")}return Object.values(n.profile.attributesByName).map(l)})();r.forEach((e=>{var t,r,a;e:{if("string"!==typeof e.group)break e;const{group:t,groupDisplayHeader:r,groupDisplayDescription:a,groupAnnotations:n}=e;delete e.group,delete e.groupDisplayHeader,delete e.groupDisplayDescription,delete e.groupAnnotations,""!==t&&(e.group={name:t,displayHeader:r,displayDescription:a,annotations:n,html5DataAnnotations:{}})}void 0!==e.validators.options&&void 0===e.annotations.inputType&&(e.annotations.inputType="select"),v({attribute:e})&&(e.multivalued=!0),e.multivalued?(null!==(t=e.values)&&void 0!==t||(e.values=void 0!==e.value?[e.value]:[]),delete e.value):(null!==(r=e.value)&&void 0!==r||(e.value=null===(a=e.values)||void 0===a?void 0:a[0]),delete e.values)})),n.passwordRequired&&r.forEach(((e,t)=>{e.name===(n.realm.registrationEmailAsUsername?"email":"username")&&r.splice(t+1,0,{name:"password",displayName:(0,o.id)("${password}"),required:!0,readOnly:!1,validators:{},annotations:{},autocomplete:"new-password",html5DataAnnotations:{}},{name:"password-confirm",displayName:(0,o.id)("${passwordConfirm}"),required:!0,readOnly:!1,validators:{},annotations:{},html5DataAnnotations:{},autocomplete:"new-password"})}));const a=[];for(const n of r){e:{if(!n.multivalued)break e;const t=(null===(e=n.values)||void 0===e?void 0:e.length)?n.values:[""];t:{if(v({attribute:n}))break t;const e=n.validators.multivalued;if(void 0===e)break t;const{min:r}=e;if(!r)break t;const a=parseInt(`${r}`);for(let n=t.length;n<a;n++)t.push("")}a.push({attribute:n,valueOrValues:t});continue}a.push({attribute:n,valueOrValues:null!==(t=n.value)&&void 0!==t?t:""})}return{formFieldStates:a.map((e=>{let{attribute:t,valueOrValues:r}=e;return{attribute:t,errors:h({attributeName:t.name,formFieldStates:a}),hasLostFocusAtLeastOnce:r instanceof Array&&!v({attribute:t})&&r.map((()=>!1)),valueOrValues:r}}))}}),[]),[y,x]=(0,a.useReducer)((function e(t,r){const a=t.formFieldStates.find((e=>{let{attribute:t}=e;return t.name===r.name}));return(0,i.assert)(void 0!==a),(()=>{var n;switch(r.action){case"update":a.valueOrValues=r.valueOrValues;{const{attribute:e}=a,{kcNumberFormat:t}=null!==(n=e.html5DataAnnotations)&&void 0!==n?n:{};t&&(a.valueOrValues instanceof Array?a.valueOrValues=a.valueOrValues.map((e=>d(e,t))):a.valueOrValues=d(a.valueOrValues,t))}a.errors=h({attributeName:r.name,formFieldStates:t.formFieldStates});{const{displayErrorsImmediately:a=!1}=r;if(a)for(const n of r.valueOrValues instanceof Array?r.valueOrValues.map((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let[,a]=t;return a})):[void 0])t=e(t,{action:"focus lost",name:r.name,fieldIndex:n})}return f||"password"===r.name&&(t=e(t,{action:"update",name:"password-confirm",valueOrValues:r.valueOrValues,displayErrorsImmediately:r.displayErrorsImmediately})),void(f&&"password"===r.name&&(t=e(t,{action:"update",name:"password-confirm",valueOrValues:(()=>{const e=t.formFieldStates.find((e=>{let{attribute:t}=e;return"password-confirm"===t.name}));return(0,i.assert)(void 0!==e),e.valueOrValues})(),displayErrorsImmediately:r.displayErrorsImmediately})));case"focus lost":if(a.hasLostFocusAtLeastOnce instanceof Array){const{fieldIndex:e}=r;return(0,i.assert)(void 0!==e),void(a.hasLostFocusAtLeastOnce[e]=!0)}return void(a.hasLostFocusAtLeastOnce=!0)}(0,i.assert)(!1)})(),Object.assign({},t)}),b),k=(0,a.useMemo)((()=>({formFieldStates:y.formFieldStates.map((e=>{var{errors:t,hasLostFocusAtLeastOnce:r,attribute:a}=e,n=p(e,["errors","hasLostFocusAtLeastOnce","attribute"]);return Object.assign({displayableErrors:t.filter((e=>{const t="boolean"===typeof r?r:void 0!==e.fieldIndex?r[e.fieldIndex]:r[r.length-1];switch(e.source.type){case"server":return!0;case"other":switch(e.source.rule){case"requiredField":case"passwordConfirmMatchesPassword":return t}(0,i.assert)(!1);case"passwordPolicy":switch(e.source.name){case"length":case"digits":case"lowerCase":case"upperCase":case"specialChars":return t;case"notUsername":case"notEmail":return!0}(0,i.assert)(!1);case"validator":switch(e.source.name){case"length":case"pattern":case"email":case"integer":case"multivalued":case"options":return t}(0,i.assert)(!1)}})),attribute:a},n)})),isFormSubmittable:y.formFieldStates.every((e=>{let{errors:t}=e;return 0===t.length}))})),[y]);return{formState:k,dispatchFormAction:x}}function v(e){var t,r;const{attribute:a}=e;return null!==(r=null===(t=a.annotations.inputType)||void 0===t?void 0:t.startsWith("multiselect"))&&void 0!==r&&r}(0,i.assert)(),(0,i.assert)();var f=r(9954),g=r(266);function h(e){const{kcContext:t,i18n:r,kcClsx:n,onIsFormSubmittableValueChange:i,doMakeUserConfirmPassword:o,BeforeField:l,AfterField:u}=e,{advancedMsg:d}=r,{formState:{formFieldStates:c,isFormSubmittable:p},dispatchFormAction:v}=m({kcContext:t,i18n:r,doMakeUserConfirmPassword:o});(0,a.useEffect)((()=>{i(p)}),[p]);const f={current:""};return(0,s.jsx)("div",{className:"prose dark:prose-invert ",children:c.map((e=>{var t;let{attribute:i,displayableErrors:c,valueOrValues:p}=e;return(0,s.jsx)("div",{className:" my-5",children:(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(b,{attribute:i,groupNameRef:f,i18n:r,kcClsx:n}),void 0!==l&&(0,s.jsx)(l,{attribute:i,dispatchFormAction:v,displayableErrors:c,valueOrValues:p,kcClsx:n,i18n:r}),(0,s.jsxs)("div",{className:"",style:{display:"password-confirm"!==i.name||o?void 0:"none"},children:[(0,s.jsxs)("div",{className:"mx-6",children:[(0,s.jsx)("label",{htmlFor:i.name,className:"",children:d(null!==(t=i.displayName)&&void 0!==t?t:"")}),i.required&&(0,s.jsx)("span",{className:"text-danger",children:" *"})]}),(0,s.jsxs)("div",{className:n("kcInputWrapperClass"),children:[void 0!==i.annotations.inputHelperTextBefore&&(0,s.jsx)("div",{className:n("kcInputHelperTextBeforeClass"),id:`form-help-text-before-${i.name}`,"aria-live":"polite",children:d(i.annotations.inputHelperTextBefore)}),(0,s.jsx)(x,{attribute:i,valueOrValues:p,displayableErrors:c,dispatchFormAction:v,kcClsx:n,i18n:r}),(0,s.jsx)(y,{attribute:i,displayableErrors:c,kcClsx:n,fieldIndex:void 0}),void 0!==i.annotations.inputHelperTextAfter&&(0,s.jsx)("div",{className:n("kcInputHelperTextAfterClass"),id:`form-help-text-after-${i.name}`,"aria-live":"polite",children:d(i.annotations.inputHelperTextAfter)}),void 0!==u&&(0,s.jsx)(u,{attribute:i,dispatchFormAction:v,displayableErrors:c,valueOrValues:p,kcClsx:n,i18n:r})]})]})]},i.name)})}))})}function b(e){var t;const{attribute:r,groupNameRef:a,i18n:i,kcClsx:o}=e,{advancedMsg:l}=i;var u,d;if((null===(t=r.group)||void 0===t?void 0:t.name)!==a.current&&(a.current=null!==(u=null===(d=r.group)||void 0===d?void 0:d.name)&&void 0!==u?u:"",""!==a.current))return(0,n.v)(void 0!==r.group),(0,s.jsxs)("div",{className:o("kcFormGroupClass"),...Object.fromEntries(Object.entries(r.group.html5DataAnnotations).map((e=>{let[t,r]=e;return[`data-${t}`,r]}))),children:[(e=>{const t=null!==(e=r.group.displayHeader)&&void 0!==e?e:"",a=""!==t?l(t):r.group.name;return(0,s.jsx)("div",{className:o("kcContentWrapperClass"),children:(0,s.jsx)("label",{id:`header-${r.group.name}`,className:o("kcFormGroupHeader"),children:a})})})(),(e=>{const t=null!==(e=r.group.displayDescription)&&void 0!==e?e:"";if(""!==t){const e=l(t);return(0,s.jsx)("div",{className:o("kcLabelWrapperClass"),children:(0,s.jsx)("label",{id:`description-${r.group.name}`,className:o("kcLabelClass"),children:e})})}return null})()]});return null}function y(e){const{attribute:t,fieldIndex:r,kcClsx:n}=e,i=e.displayableErrors.filter((e=>e.fieldIndex===r));return 0===i.length?null:(0,s.jsx)("span",{id:`input-error-${t.name}${void 0===r?"":`-${r}`}`,className:"text-danger text-md ","aria-live":"polite",children:i.filter((e=>e.fieldIndex===r)).map(((e,t,r)=>{let{errorMessage:n}=e;return(0,s.jsxs)(a.Fragment,{children:[n,r.length-1!==t&&(0,s.jsx)("br",{})]},t)}))})}function x(e){const{attribute:t,valueOrValues:r}=e;switch(t.annotations.inputType){case"textarea":return(0,s.jsx)($,{...e});case"select":case"multiselect":return(0,s.jsx)(I,{...e});case"select-radiobuttons":case"multiselect-checkboxes":return(0,s.jsx)(j,{...e});default:{if(r instanceof Array)return(0,s.jsx)(s.Fragment,{children:r.map((function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];let[,n]=r;return(0,s.jsx)(k,{...e,fieldIndex:n},n)}))});const a=(0,s.jsx)(k,{...e,fieldIndex:void 0});return"password"===t.name||"password-confirm"===t.name?(0,s.jsx)(g.b,{kcClsx:e.kcClsx,i18n:e.i18n,passwordInputId:t.name,children:a}):a}}}function k(e){var t;const{attribute:r,fieldIndex:a,kcClsx:i,dispatchFormAction:o,valueOrValues:l,i18n:u,displayableErrors:d}=e,{advancedMsgStr:c}=u;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.p,{type:(()=>{const{inputType:e}=r.annotations;return null!==e&&void 0!==e&&e.startsWith("html5-")?e.slice(6):null!==e&&void 0!==e?e:"text"})(),id:r.name,name:r.name,value:void 0!==a?((0,n.v)(l instanceof Array),l[a]):((0,n.v)("string"===typeof l),l),"aria-invalid":void 0!==d.find((e=>e.fieldIndex===a)),disabled:r.readOnly,autoComplete:r.autocomplete,placeholder:void 0===r.annotations.inputTypePlaceholder?void 0:c(r.annotations.inputTypePlaceholder),pattern:r.annotations.inputTypePattern,size:void 0===r.annotations.inputTypeSize?void 0:parseInt(`${r.annotations.inputTypeSize}`),maxLength:void 0===r.annotations.inputTypeMaxlength?void 0:parseInt(`${r.annotations.inputTypeMaxlength}`),minLength:void 0===r.annotations.inputTypeMinlength?void 0:parseInt(`${r.annotations.inputTypeMinlength}`),max:r.annotations.inputTypeMax,min:r.annotations.inputTypeMin,step:r.annotations.inputTypeStep,...Object.fromEntries(Object.entries(null!==(t=r.html5DataAnnotations)&&void 0!==t?t:{}).map((e=>{let[t,r]=e;return[`data-${t}`,r]}))),onChange:e=>o({action:"update",name:r.name,valueOrValues:void 0!==a?((0,n.v)(l instanceof Array),l.map(((t,r)=>r===a?e.target.value:t))):e.target.value}),onBlur:()=>o({action:"focus lost",name:r.name,fieldIndex:a})}),(()=>{if(void 0===a)return null;(0,n.v)(l instanceof Array);const e=l;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{attribute:r,kcClsx:i,displayableErrors:d,fieldIndex:a}),(0,s.jsx)(O,{attribute:r,values:e,fieldIndex:a,dispatchFormAction:o,i18n:u})]})})()]})}function O(e){const{attribute:t,values:r,fieldIndex:a,dispatchFormAction:n,i18n:i}=e,{msg:o}=i,{hasAdd:l,hasRemove:u}=function(e){const{attribute:t,values:r,fieldIndex:a}=e;return{hasRemove:(()=>{if(1===r.length)return!1;const e=(()=>{const{multivalued:e}=t.validators;if(void 0===e)return;const r=e.min;return void 0!==r?parseInt(`${r}`):void 0})();return void 0===e||r.length!==e})(),hasAdd:(()=>{if(a+1!==r.length)return!1;const e=(()=>{const{multivalued:e}=t.validators;if(void 0===e)return;const r=e.max;return void 0!==r?parseInt(`${r}`):void 0})();return void 0===e||r.length!==e})()}}({attribute:t,values:r,fieldIndex:a}),d=`-${t.name}-${a+1}`;return(0,s.jsxs)(s.Fragment,{children:[u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{id:`kc-remove${d}`,type:"button",className:"pf-c-button pf-m-inline pf-m-link",onClick:()=>n({action:"update",name:t.name,valueOrValues:r.filter(((e,t)=>t!==a))}),children:o("remove")}),l?(0,s.jsx)(s.Fragment,{children:"\xa0|\xa0"}):null]}),l&&(0,s.jsx)("button",{id:`kc-add${d}`,type:"button",className:"pf-c-button pf-m-inline pf-m-link",onClick:()=>n({action:"update",name:t.name,valueOrValues:[...r,""]}),children:o("addValue")})]})}function j(e){const{attribute:t,dispatchFormAction:r,kcClsx:a,valueOrValues:i}=e,{advancedMsg:o}=e.i18n,{classDiv:l,classInput:u,classLabel:d,inputType:c}=(()=>{const{inputType:e}=t.annotations;switch((0,n.v)("select-radiobuttons"===e||"multiselect-checkboxes"===e),e){case"select-radiobuttons":return{inputType:"radio",classDiv:a("kcInputClassRadio"),classInput:a("kcInputClassRadioInput"),classLabel:a("kcInputClassRadioLabel")};case"multiselect-checkboxes":return{inputType:"checkbox",classDiv:a("kcInputClassCheckbox"),classInput:a("kcInputClassCheckboxInput"),classLabel:a("kcInputClassCheckboxLabel")}}})(),p=((e,r)=>{e:{const{inputOptionsFromValidation:e}=t.annotations;if(void 0===e)break e;const r=t.validators[e];if(void 0!==r&&void 0!==r.options)return r.options}return null!==(e=null===(r=t.validators.options)||void 0===r?void 0:r.options)&&void 0!==e?e:[]})();return(0,s.jsx)(s.Fragment,{children:p.map((n=>(0,s.jsxs)("div",{className:l,children:[(0,s.jsx)("input",{type:c,id:`${t.name}-${n}`,name:t.name,value:n,className:u,"aria-invalid":0!==e.displayableErrors.length,disabled:t.readOnly,checked:i instanceof Array?i.includes(n):i===n,onChange:e=>r({action:"update",name:t.name,valueOrValues:(()=>{const t=e.target.checked;if(i instanceof Array){const e=[...i];return t?e.push(n):e.splice(e.indexOf(n),1),e}return e.target.checked?n:""})()}),onBlur:()=>r({action:"focus lost",name:t.name,fieldIndex:void 0})}),(0,s.jsx)("label",{htmlFor:`${t.name}-${n}`,className:`${d}${t.readOnly?` ${a("kcInputClassRadioCheckboxLabelDisabled")}`:""}`,children:o(n)})]},n)))})}function $(e){const{attribute:t,dispatchFormAction:r,kcClsx:a,displayableErrors:i,valueOrValues:o}=e;(0,n.v)("string"===typeof o);const l=o;return(0,s.jsx)("textarea",{id:t.name,name:t.name,className:a("kcInputClass"),"aria-invalid":0!==i.length,disabled:t.readOnly,cols:void 0===t.annotations.inputTypeCols?void 0:parseInt(`${t.annotations.inputTypeCols}`),rows:void 0===t.annotations.inputTypeRows?void 0:parseInt(`${t.annotations.inputTypeRows}`),maxLength:void 0===t.annotations.inputTypeMaxlength?void 0:parseInt(`${t.annotations.inputTypeMaxlength}`),value:l,onChange:e=>r({action:"update",name:t.name,valueOrValues:e.target.value}),onBlur:()=>r({action:"focus lost",name:t.name,fieldIndex:void 0})})}function I(e){const{attribute:t,dispatchFormAction:r,kcClsx:a,displayableErrors:i,i18n:o,valueOrValues:l}=e,{advancedMsgStr:u}=o,d="multiselect"===t.annotations.inputType;return(0,s.jsxs)("select",{id:t.name,name:t.name,className:a("kcInputClass"),"aria-invalid":0!==i.length,disabled:t.readOnly,multiple:d,size:void 0===t.annotations.inputTypeSize?void 0:parseInt(`${t.annotations.inputTypeSize}`),value:l,onChange:e=>r({action:"update",name:t.name,valueOrValues:d?Array.from(e.target.selectedOptions).map((e=>e.value)):e.target.value}),onBlur:()=>r({action:"focus lost",name:t.name,fieldIndex:void 0}),children:[!d&&(0,s.jsx)("option",{value:""}),((e,r)=>{e:{const{inputOptionsFromValidation:e}=t.annotations;if(void 0===e)break e;(0,n.v)("string"===typeof e);const r=t.validators[e];if(void 0!==r&&void 0!==r.options)return r.options}return null!==(e=null===(r=t.validators.options)||void 0===r?void 0:r.options)&&void 0!==e?e:[]})().map((e=>(0,s.jsx)("option",{value:e,children:(()=>{if(void 0!==t.annotations.inputOptionLabels){var r;const{inputOptionLabels:a}=t.annotations;return u(null!==(r=a[e])&&void 0!==r?r:e)}return void 0!==t.annotations.inputOptionLabelsI18nPrefix?u(`${t.annotations.inputOptionLabelsI18nPrefix}.${e}`):e})()},e)))]})}},4837:function(){Array.prototype.every||(Array.prototype.every=function(e,t){var r,a;if(null==this)throw new TypeError("this is null or not defined");var n=Object(this),s=n.length>>>0;if("function"!==typeof e&&"[object Function]"!==Object.prototype.toString.call(e))throw new TypeError;for(arguments.length>1&&(r=t),a=0;a<s;){var i;if(a in n)if(i=n[a],!(r?e.call(r,i,a,n):e(i,a,n)))return!1;a++}return!0})}}]);
//# sourceMappingURL=6729.1f0225c9.chunk.js.map