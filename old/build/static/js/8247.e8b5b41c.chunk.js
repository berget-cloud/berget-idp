"use strict";(self.webpackChunkberget_idp=self.webpackChunkberget_idp||[]).push([[8247],{8247:function(e,n,t){t.r(n),t.d(n,{default:function(){return a}});var o=t(579),s=t(5043),c=t(9761),r=t(3233),i=t(569);function a(e){const{kcContext:n,i18n:t,doUseDefaultCss:a,Template:l,classes:u}=e,{kcClsx:m}=(0,r.z)({doUseDefaultCss:a,classes:u}),{recoveryAuthnCodesConfigBean:p,isAppInitiatedAction:y}=n,{msg:v,msgStr:C}=t,{insertScriptTags:h}=(0,i.p)({componentOrHookName:"LoginRecoveryAuthnCodeConfig",scriptTags:[{type:"text/javascript",textContent:`\n\n                    /* copy recovery codes  */\n                    function copyRecoveryCodes() {\n                        var tmpTextarea = document.createElement("textarea");\n                        var codes = document.getElementById("kc-recovery-codes-list").getElementsByTagName("li");\n                        for (i = 0; i < codes.length; i++) {\n                            tmpTextarea.value = tmpTextarea.value + codes[i].innerText + "\\n";\n                        }\n                        document.body.appendChild(tmpTextarea);\n                        tmpTextarea.select();\n                        document.execCommand("copy");\n                        document.body.removeChild(tmpTextarea);\n                    }\n\n                    var copyButton = document.getElementById("copyRecoveryCodes");\n                    copyButton && copyButton.addEventListener("click", function () {\n                        copyRecoveryCodes();\n                    });\n\n                    /* download recovery codes  */\n                    function formatCurrentDateTime() {\n                        var dt = new Date();\n                        var options = {\n                            month: 'long',\n                            day: 'numeric',\n                            year: 'numeric',\n                            hour: 'numeric',\n                            minute: 'numeric',\n                            timeZoneName: 'short'\n                        };\n\n                        return dt.toLocaleString('en-US', options);\n                    }\n\n                    function parseRecoveryCodeList() {\n                        var recoveryCodes = document.querySelectorAll(".kc-recovery-codes-list li");\n                        var recoveryCodeList = "";\n\n                        for (var i = 0; i < recoveryCodes.length; i++) {\n                            var recoveryCodeLiElement = recoveryCodes[i].innerText;\n                            recoveryCodeList += recoveryCodeLiElement + "\\r\\n";\n                        }\n\n                        return recoveryCodeList;\n                    }\n\n                    function buildDownloadContent() {\n                        var recoveryCodeList = parseRecoveryCodeList();\n                        var dt = new Date();\n                        var options = {\n                            month: 'long',\n                            day: 'numeric',\n                            year: 'numeric',\n                            hour: 'numeric',\n                            minute: 'numeric',\n                            timeZoneName: 'short'\n                        };\n\n                        return fileBodyContent =\n                            "${C("recovery-codes-download-file-header")}\\n\\n" +\n                            recoveryCodeList + "\\n" +\n                            "${C("recovery-codes-download-file-description")}\\n\\n" +\n                            "${C("recovery-codes-download-file-date")} " + formatCurrentDateTime();\n                    }\n\n                    function setUpDownloadLinkAndDownload(filename, text) {\n                        var el = document.createElement('a');\n                        el.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n                        el.setAttribute('download', filename);\n                        el.style.display = 'none';\n                        document.body.appendChild(el);\n                        el.click();\n                        document.body.removeChild(el);\n                    }\n\n                    function downloadRecoveryCodes() {\n                        setUpDownloadLinkAndDownload('kc-download-recovery-codes.txt', buildDownloadContent());\n                    }\n\n                    var downloadButton = document.getElementById("downloadRecoveryCodes");\n                    downloadButton && downloadButton.addEventListener("click", downloadRecoveryCodes);\n\n                    /* print recovery codes */\n                    function buildPrintContent() {\n                        var recoveryCodeListHTML = document.getElementById('kc-recovery-codes-list').innerHTML;\n                        var styles =\n                            \`@page { size: auto;  margin-top: 0; }\n                            body { width: 480px; }\n                            div { list-style-type: none; font-family: monospace }\n                            p:first-of-type { margin-top: 48px }\`;\n\n                        return printFileContent =\n                            "<html><style>" + styles + "</style><body>" +\n                            "<title>kc-download-recovery-codes</title>" +\n                            "<p>${C("recovery-codes-download-file-header")}</p>" +\n                            "<div>" + recoveryCodeListHTML + "</div>" +\n                            "<p>${C("recovery-codes-download-file-description")}</p>" +\n                            "<p>${C("recovery-codes-download-file-date")} " + formatCurrentDateTime() + "</p>" +\n                            "</body></html>";\n                    }\n\n                    function printRecoveryCodes() {\n                        var w = window.open();\n                        w.document.write(buildPrintContent());\n                        w.print();\n                        w.close();\n                    }\n\n                    var printButton = document.getElementById("printRecoveryCodes");\n                    printButton && printButton.addEventListener("click", printRecoveryCodes);\n                `}]});return(0,s.useEffect)((()=>{h()}),[]),(0,o.jsxs)(l,Object.assign({kcContext:n,i18n:t,doUseDefaultCss:a,classes:u,headerNode:v("recovery-code-config-header")},{children:[(0,o.jsxs)("div",Object.assign({className:(0,c.$)("pf-c-alert","pf-m-warning","pf-m-inline",m("kcRecoveryCodesWarning")),"aria-label":"Warning alert"},{children:[(0,o.jsx)("div",Object.assign({className:"pf-c-alert__icon"},{children:(0,o.jsx)("i",{className:"pficon-warning-triangle-o","aria-hidden":"true"})})),(0,o.jsxs)("h4",Object.assign({className:"pf-c-alert__title"},{children:[(0,o.jsx)("span",Object.assign({className:"pf-screen-reader"},{children:"Warning alert:"})),v("recovery-code-config-warning-title")]})),(0,o.jsx)("div",Object.assign({className:"pf-c-alert__description"},{children:(0,o.jsx)("p",{children:v("recovery-code-config-warning-message")})}))]})),(0,o.jsx)("ol",Object.assign({id:"kc-recovery-codes-list",className:m("kcRecoveryCodesList")},{children:p.generatedRecoveryAuthnCodesList.map(((e,n)=>(0,o.jsxs)("li",{children:[(0,o.jsxs)("span",{children:[n+1,":"]})," ",e.slice(0,4),"-",e.slice(4,8),"-",e.slice(8)]},n)))})),(0,o.jsxs)("div",Object.assign({className:m("kcRecoveryCodesActions")},{children:[(0,o.jsxs)("button",Object.assign({id:"printRecoveryCodes",className:(0,c.$)("pf-c-button","pf-m-link"),type:"button"},{children:[(0,o.jsx)("i",{className:"pficon-print","aria-hidden":"true"})," ",v("recovery-codes-print")]})),(0,o.jsxs)("button",Object.assign({id:"downloadRecoveryCodes",className:(0,c.$)("pf-c-button","pf-m-link"),type:"button"},{children:[(0,o.jsx)("i",{className:"pficon-save","aria-hidden":"true"})," ",v("recovery-codes-download")]})),(0,o.jsxs)("button",Object.assign({id:"copyRecoveryCodes",className:(0,c.$)("pf-c-button","pf-m-link"),type:"button"},{children:[(0,o.jsx)("i",{className:"pficon-blueprint","aria-hidden":"true"})," ",v("recovery-codes-copy")]}))]})),(0,o.jsxs)("div",Object.assign({className:m("kcFormOptionsClass")},{children:[(0,o.jsx)("input",{className:m("kcCheckInputClass"),type:"checkbox",id:"kcRecoveryCodesConfirmationCheck",name:"kcRecoveryCodesConfirmationCheck",onChange:function(){document.getElementById("saveRecoveryAuthnCodesBtn").disabled=!this.checked}}),(0,o.jsx)("label",Object.assign({htmlFor:"kcRecoveryCodesConfirmationCheck"},{children:v("recovery-codes-confirmation-message")}))]})),(0,o.jsxs)("form",Object.assign({action:n.url.loginAction,className:m("kcFormGroupClass"),id:"kc-recovery-codes-settings-form",method:"post"},{children:[(0,o.jsx)("input",{type:"hidden",name:"generatedRecoveryAuthnCodes",value:p.generatedRecoveryAuthnCodesAsString}),(0,o.jsx)("input",{type:"hidden",name:"generatedAt",value:p.generatedAt}),(0,o.jsx)("input",{type:"hidden",id:"userLabel",name:"userLabel",value:C("recovery-codes-label-default")}),(0,o.jsx)(d,{kcClsx:m,i18n:t}),y?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"submit",className:m("kcButtonClass","kcButtonPrimaryClass","kcButtonLargeClass"),id:"saveRecoveryAuthnCodesBtn",value:C("recovery-codes-action-complete"),disabled:!0}),(0,o.jsx)("button",Object.assign({type:"submit",className:m("kcButtonClass","kcButtonDefaultClass","kcButtonLargeClass"),id:"cancelRecoveryAuthnCodesBtn",name:"cancel-aia",value:"true"},{children:v("recovery-codes-action-cancel")}))]}):(0,o.jsx)("input",{type:"submit",className:m("kcButtonClass","kcButtonPrimaryClass","kcButtonBlockClass","kcButtonLargeClass"),id:"saveRecoveryAuthnCodesBtn",value:C("recovery-codes-action-complete"),disabled:!0})]}))]}))}function d(e){const{kcClsx:n,i18n:t}=e,{msg:s}=t;return(0,o.jsx)("div",Object.assign({id:"kc-form-options",className:n("kcFormOptionsClass")},{children:(0,o.jsx)("div",Object.assign({className:n("kcFormOptionsWrapperClass")},{children:(0,o.jsx)("div",Object.assign({className:"checkbox"},{children:(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",id:"logout-sessions",name:"logout-sessions",value:"on",defaultChecked:!0}),s("logoutOtherSessions")]})}))}))}))}}}]);
//# sourceMappingURL=8247.e8b5b41c.chunk.js.map